import"../../web_modules/imba/dist/imba.js";var s=Symbol();import B from"../../web_modules/mapbox-gl.js";export default class t extends imba.tags.get("component","ImbaElement"){async mount(){var Q=this;await window.navigator.permissions.query({name:"geolocation"});let F=window.navigator.geolocation,U={enableHighAccuracy:!0,timeout:5e3,maximumAge:0};return B.accessToken="pk.eyJ1IjoiY2Fzc2lhbm9zZiIsImEiOiJja2VydjMydDgxZXhyMzRudGNidmZudXRyIn0.wjcZggyzs5QcZxhEL-L0zg",this.map=new B.Map({container:this.$map,style:"mapbox://styles/mapbox/streets-v11",zoom:14}),this.map.on("load",function(){return Q.map.resize()}),this.marker=new B.Marker,F.getCurrentPosition(this.initPosition.bind(this)),F.watchPosition(this.setPosition.bind(this),this.onError.bind(this),U)}onError(Q){return console.warn(Q)}setPosition(Q){return this.marker.setLngLat([Q.coords.longitude,Q.coords.latitude]).addTo(this.map)}initPosition(Q){return this.map.setCenter([Q.coords.longitude,Q.coords.latitude])}render(){var Q,F,U,x=this._ns_||"",c;return Q=this,Q.open$(),(F=U=1,Q[s]===1)||(F=U=0,Q[s]=1),F||(c=this.$map=imba.createElement("div",Q,`${x} map ref--map`,null)),Q.close$(U),Q}}imba.tags.define("geo-qhj8fm",t,{ns:"qhj8fmc"}),imba.inlineStyles(`.ref--map.qhj8fmc:not(#_) {height: 100%;}

`,"qhj8fm");
